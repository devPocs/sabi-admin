import{X as e,Y as s,Z as r,j as n,_ as i,$ as a,a0 as o,a1 as t,a2 as l,a3 as c,i as d,l as m,r as x,m as h,C as u,o as b,B as f,F as j,a as p,a4 as g,T as y,a5 as S,a6 as w,H as v,a7 as z,a8 as C,a9 as k,aa as _,V as N,ab as T,w as R}from"./index-fiy_3RNy.js";const P=e((function(e,o){const t=s("Link",e),{className:l,isExternal:c,...d}=r(e);return n.jsx(i.a,{target:c?"_blank":void 0,rel:c?"noopener":void 0,ref:o,className:a("chakra-link",l),...d,__css:t})}));P.displayName="Link";const[D,W]=o({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),E=e(((e,s)=>{const o=t("Table",e),{className:l,layout:c,...d}=r(e);return n.jsx(D,{value:o,children:n.jsx(i.table,{ref:s,__css:{tableLayout:c,...o.table},className:a("chakra-table",l),...d})})}));E.displayName="Table";const I=e(((e,s)=>{const{overflow:r,overflowX:o,className:t,...l}=e;return n.jsx(i.div,{ref:s,className:a("chakra-table__container",t),...l,__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:r??o??"auto",overflowY:"hidden",maxWidth:"100%"}})})),q=e(((e,s)=>{const r=W();return n.jsx(i.tbody,{...e,ref:s,__css:r.tbody})})),A=e((({isNumeric:e,...s},r)=>{const a=W();return n.jsx(i.td,{...s,ref:r,__css:a.td,"data-is-numeric":e})})),L=e((({isNumeric:e,...s},r)=>{const a=W();return n.jsx(i.th,{...s,ref:r,__css:a.th,"data-is-numeric":e})})),V=e(((e,s)=>{const r=W();return n.jsx(i.thead,{...e,ref:s,__css:r.thead})})),F=e(((e,s)=>{const r=W();return n.jsx(i.tr,{...e,ref:s,__css:r.tr})})),M=()=>{var e,s,r,i;const{id:a}=l(),o=c(),t=d(),D=m({base:!0,md:!1}),W=m({base:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"}),M=m({base:"xs",md:"sm"}),X=m({base:"sm",md:"md"}),[B,H]=x.useState("pending"),[J]=x.useState(1),[$,O]=x.useState(""),{data:Y,isLoading:K,isError:U}=h({queryKey:["subscription",a],queryFn:()=>R.getSubscriptionPlanById(a),onError:e=>{var s;t({title:"Error",description:(null==(s=null==e?void 0:e.data)?void 0:s.message)||"Failed to fetch subscription details",status:"error",duration:5e3,isClosable:!0})},enabled:!!a}),Z={id:a,amount:(null==(s=null==(e=null==Y?void 0:Y.data)?void 0:e.amount)?void 0:s.toLocaleString())||"0",frequency:(null==(r=null==Y?void 0:Y.data)?void 0:r.frequency)||"N/A",subscribers:(null==(i=null==Y?void 0:Y.data)?void 0:i.subscribersCount)||0},G=[{id:"VEND123",name:"John Doe",dateTime:"4/01/2025 ; 8:00 PM",amount:"5,000"},{id:"CUST123",name:"Jane Smith",dateTime:"4/01/2025 ; 8:00 PM",amount:"5,000"},{id:"VEND123",name:"Robert Johnson",dateTime:"4/01/2025 ; 8:00 PM",amount:"5,000"}],Q=e=>{H(e)},ee=()=>{o(T.subscription)},se=e=>{t({title:"Payment Confirmed",description:`Payment for ${e} has been confirmed`,status:"success",duration:3e3,isClosable:!0})},re=e=>{t({title:"Receipt Opened",description:`Receipt for ${e} is being viewed`,status:"info",duration:3e3,isClosable:!0})};return K?n.jsx(u,{minH:"200px",children:n.jsx(b,{})}):U?n.jsxs(f,{w:"100%",children:[n.jsxs(j,{justifyContent:"flex-start",alignItems:"center",mb:6,flexWrap:"wrap",gap:2,children:[n.jsx(p,{leftIcon:n.jsx(g,{}),variant:"ghost",onClick:ee,color:"black",size:D?"sm":"md"}),n.jsx(y,{fontWeight:"bold",fontSize:X,color:"black",children:"Back to Subscription Plans"})]}),n.jsxs(u,{minH:"200px",flexDirection:"column",children:[n.jsx(y,{color:"red.500",mb:4,children:"Error loading subscription details"}),n.jsx(p,{colorScheme:"teal",onClick:()=>window.location.reload(),children:"Try Again"})]})]}):n.jsxs(f,{w:"100%",children:[n.jsxs(j,{justifyContent:"flex-start",alignItems:"center",mb:[4,5,6],flexWrap:"wrap",gap:2,children:[n.jsx(p,{leftIcon:n.jsx(g,{}),variant:"ghost",onClick:ee,color:"black",size:D?"sm":"md"}),n.jsx(y,{fontWeight:"bold",fontSize:X,color:"black",children:"Subscription Plan / Subscribers"})]}),n.jsxs(S,{templateColumns:W,gap:[3,4],bg:"white",p:[4,5,6],borderRadius:"md",mb:[4,5,6],boxShadow:"sm",children:[n.jsxs(w,{children:[n.jsx(y,{fontSize:"sm",color:"gray.700",mb:1,children:"Amount"}),n.jsxs(y,{fontSize:["sm","md"],fontWeight:"medium",children:["₦",Z.amount]})]}),n.jsxs(w,{children:[n.jsx(y,{fontSize:"sm",color:"gray.700",mb:1,children:"Frequency"}),n.jsx(y,{fontSize:["sm","md"],fontWeight:"medium",children:Z.frequency})]}),n.jsxs(w,{colSpan:{base:D?2:1,sm:D?2:1,md:1},children:[n.jsx(y,{fontSize:"sm",color:"gray.700",mb:1,children:"No of Subscribers"}),n.jsx(y,{fontSize:["sm","md"],fontWeight:"medium",children:Z.subscribers})]})]}),n.jsxs(j,{mb:[4,5,6],justifyContent:["flex-start","space-between"],alignItems:["flex-start","center"],flexDirection:["column","row"],gap:[3,0],width:"100%",children:[n.jsxs(v,{spacing:0,mb:[3,0],children:[n.jsx(f,{as:"button",fontSize:M,py:2,px:3,bg:"pending"===B?"teal.200":"white",color:"pending"===B?"teal.700":"gray.700",borderRadius:"md 0 0 md",onClick:()=>Q("pending"),children:"Pending (250)"}),n.jsx(f,{as:"button",fontSize:M,py:2,px:3,bg:"confirmed"===B?"teal.200":"white",color:"confirmed"===B?"teal.700":"gray.700",borderRadius:"0 md md 0",onClick:()=>Q("confirmed"),children:"Confirmed (250)"})]}),n.jsxs(z,{maxW:["100%","100%","320px"],width:"100%",children:[n.jsx(C,{pointerEvents:"none",children:n.jsx(k,{color:"gray.400"})}),n.jsx(_,{color:"gray.700",placeholder:"Search for a subscriber by name or ID",bg:"white",borderRadius:"md",size:D?"sm":"md",value:$,onChange:e=>{O(e.target.value)}})]})]}),n.jsx(f,{bg:"white",borderRadius:"md",boxShadow:"sm",overflow:"hidden",mb:4,children:n.jsx(I,{overflowX:"auto",children:n.jsxs(E,{variant:"simple",size:D?"sm":"md",children:[n.jsx(V,{bg:"gray.50",children:n.jsxs(F,{children:[n.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"S/N"}),n.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"Date & Time"}),n.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"Name"}),n.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"ID"}),n.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"Amount (₦)"}),n.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"Actions"})]})}),n.jsx(q,{fontSize:["xs","sm"],children:G.length>0?G.map(((e,s)=>n.jsxs(F,{children:[n.jsx(A,{children:s+1}),n.jsx(A,{children:e.dateTime}),n.jsx(A,{children:e.name}),n.jsx(A,{children:e.id}),n.jsx(A,{children:e.amount}),n.jsx(A,{children:D?n.jsxs(N,{align:"flex-start",spacing:1,children:[n.jsx(P,{color:"yellow.500",fontSize:"xs",onClick:()=>re(e.id),cursor:"pointer",children:"View Receipt"}),n.jsx(P,{color:"teal.500",fontSize:"xs",onClick:()=>se(e.id),cursor:"pointer",children:"Confirm Payment"})]}):n.jsxs(v,{spacing:4,children:[n.jsx(P,{color:"yellow.500",fontSize:"sm",onClick:()=>re(e.id),cursor:"pointer",children:"View Receipt"}),n.jsx(P,{color:"teal.500",fontSize:"sm",onClick:()=>se(e.id),cursor:"pointer",children:"Confirm Payment"})]})})]},s))):n.jsx(F,{children:n.jsx(A,{colSpan:6,textAlign:"center",py:4,children:"No subscribers found"})})})]})})}),G.length>0&&n.jsxs(j,{justify:{base:"center",sm:"space-between"},align:"center",mt:4,p:2,flexDirection:{base:"column",sm:"row"},gap:{base:3,sm:0},children:[n.jsx(j,{align:"center",children:n.jsx(y,{fontSize:"sm",color:"gray.700",mr:2,children:"Rows per page: 10"})}),n.jsxs(v,{spacing:1,children:[n.jsx(p,{variant:"ghost",size:"sm",isDisabled:1===J,children:"‹"}),n.jsx(p,{size:"sm",colorScheme:"teal",variant:"solid",borderRadius:"md",children:"1"}),n.jsx(p,{variant:"ghost",size:"sm",children:"2"}),n.jsx(p,{variant:"ghost",size:"sm",children:"›"})]})]})]})};export{M as default};
