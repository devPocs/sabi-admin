import{R as e,U as s,W as n,j as r,X as i,Y as a,Z as o,_ as t,$ as l,a0 as c,u as d,r as m,l as h,C as u,a1 as x,B as j,F as b,a as g,a2 as f,T as p,a3 as y,a4 as S,H as v,a5 as w,a6 as z,a7 as C,a8 as k,a9 as _,w as N}from"./index-WiYeBUZH.js";const T=e((function(e,o){const t=s("Link",e),{className:l,isExternal:c,...d}=n(e);return r.jsx(i.a,{target:c?"_blank":void 0,rel:c?"noopener":void 0,ref:o,className:a("chakra-link",l),...d,__css:t})}));T.displayName="Link";const[R,I]=o({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),P=e(((e,s)=>{const o=t("Table",e),{className:l,layout:c,...d}=n(e);return r.jsx(R,{value:o,children:r.jsx(i.table,{ref:s,__css:{tableLayout:c,...o.table},className:a("chakra-table",l),...d})})}));P.displayName="Table";const D=e(((e,s)=>{const n=I();return r.jsx(i.tbody,{...e,ref:s,__css:n.tbody})})),E=e((({isNumeric:e,...s},n)=>{const a=I();return r.jsx(i.td,{...s,ref:n,__css:a.td,"data-is-numeric":e})})),W=e((({isNumeric:e,...s},n)=>{const a=I();return r.jsx(i.th,{...s,ref:n,__css:a.th,"data-is-numeric":e})})),q=e(((e,s)=>{const n=I();return r.jsx(i.thead,{...e,ref:s,__css:n.thead})})),A=e(((e,s)=>{const n=I();return r.jsx(i.tr,{...e,ref:s,__css:n.tr})})),L=()=>{var e,s,n,i;const{id:a}=l(),o=c(),t=d(),[R,I]=m.useState("pending"),[L,F]=m.useState(1);m.useState(10);const[M,B]=m.useState(""),{data:H,isLoading:J,isError:V,error:$}=h({queryKey:["subscription",a],queryFn:()=>N.getSubscriptionPlanById(a),onError:e=>{var s;t({title:"Error",description:(null==(s=null==e?void 0:e.data)?void 0:s.message)||"Failed to fetch subscription details",status:"error",duration:5e3,isClosable:!0})},enabled:!!a});console.log("Sub data",H);const U={id:a,amount:(null==(s=null==(e=null==H?void 0:H.data)?void 0:e.amount)?void 0:s.toLocaleString())||"0",frequency:(null==(n=null==H?void 0:H.data)?void 0:n.frequency)||"N/A",subscribers:(null==(i=null==H?void 0:H.data)?void 0:i.subscribersCount)||0},K=[{id:"VEND123",name:"John Doe",dateTime:"4/01/2025 ; 8:00 PM",amount:"5,000"},{id:"CUST123",name:"Jane Smith",dateTime:"4/01/2025 ; 8:00 PM",amount:"5,000"},{id:"VEND123",name:"Robert Johnson",dateTime:"4/01/2025 ; 8:00 PM",amount:"5,000"}],O=e=>{I(e)},X=()=>{o(_.subscription)};return J?r.jsx(u,{minH:"200px",children:r.jsx(x,{size:"xl",color:"teal.500"})}):V?r.jsxs(j,{w:"100%",children:[r.jsx(b,{justifyContent:"space-between",alignItems:"center",mb:6,children:r.jsxs(j,{display:"flex",alignItems:"center",children:[r.jsx(g,{leftIcon:r.jsx(f,{}),variant:"ghost",onClick:X,color:"black",size:"md"}),r.jsx(p,{fontWeight:"bold",fontSize:"md",color:"black",children:"Back to Subscription Plans"})]})}),r.jsxs(u,{minH:"200px",flexDirection:"column",children:[r.jsx(p,{color:"red.500",mb:4,children:"Error loading subscription details"}),r.jsx(g,{colorScheme:"teal",onClick:()=>window.location.reload(),children:"Try Again"})]})]}):r.jsxs(j,{w:"100%",children:[r.jsxs(b,{justifyContent:"space-between",alignItems:"center",mb:6,children:[r.jsxs(j,{display:"flex",alignItems:"center",children:[r.jsx(g,{leftIcon:r.jsx(f,{}),variant:"ghost",onClick:X,color:"black",size:"md"}),r.jsx(p,{fontWeight:"bold",fontSize:"md",color:"black",children:"Subscription Plan / Subscribers"})]}),r.jsx(j,{width:"100px"})," "]}),r.jsxs(y,{templateColumns:"repeat(3, 1fr)",gap:4,bg:"white",p:6,borderRadius:"md",mb:6,boxShadow:"sm",children:[r.jsxs(S,{children:[r.jsx(p,{fontSize:"sm",color:"gray.700",mb:1,children:"Amount"}),r.jsxs(p,{fontSize:"md",fontWeight:"medium",children:["₦",U.amount]})]}),r.jsxs(S,{children:[r.jsx(p,{fontSize:"sm",color:"gray.700",mb:1,children:"Frequency"}),r.jsx(p,{fontSize:"md",fontWeight:"medium",children:U.frequency})]}),r.jsxs(S,{children:[r.jsx(p,{fontSize:"sm",color:"gray.700",mb:1,children:"No of Subscribers"}),r.jsx(p,{fontSize:"md",fontWeight:"medium",children:U.subscribers})]})]}),r.jsxs(b,{mb:6,justifyContent:"space-between",alignItems:"center",children:[r.jsxs(v,{spacing:0,children:[r.jsx(j,{as:"button",fontSize:"sm",py:2,px:4,bg:"pending"===R?"teal.200":"white",color:"pending"===R?"teal.700":"gray.700",borderRadius:"md 0 0 md",onClick:()=>O("pending"),children:"Pending (250)"}),r.jsx(j,{as:"button",fontSize:"sm",py:2,px:4,bg:"confirmed"===R?"teal.200":"white",color:"confirmed"===R?"teal.700":"gray.700",borderRadius:"0 md md 0",onClick:()=>O("confirmed"),children:"Confirmed (250)"})]}),r.jsxs(w,{maxW:"320px",children:[r.jsx(z,{pointerEvents:"none",children:r.jsx(C,{color:"gray.400"})}),r.jsx(k,{color:"gray.700",placeholder:"Search for a subscriber by name or ID",bg:"white",borderRadius:"md",size:"md",value:M,onChange:e=>{B(e.target.value),F(1)}})]})]}),r.jsx(j,{bg:"white",borderRadius:"md",boxShadow:"sm",overflow:"hidden",mb:4,children:r.jsxs(P,{variant:"simple",size:"md",children:[r.jsx(q,{bg:"gray.50",children:r.jsxs(A,{children:[r.jsx(W,{color:"gray.700",children:"S/N"}),r.jsx(W,{color:"gray.700",children:"Date & Time"}),r.jsx(W,{color:"gray.700",children:"Name"}),r.jsx(W,{color:"gray.700",children:"ID"}),r.jsx(W,{color:"gray.700",children:"Amount (₦)"}),r.jsx(W,{color:"gray.700",children:"Actions"})]})}),r.jsx(D,{fontSize:"sm",children:K.length>0?K.map(((e,s)=>r.jsxs(A,{children:[r.jsx(E,{children:s+1}),r.jsx(E,{children:e.dateTime}),r.jsx(E,{children:e.name}),r.jsx(E,{children:e.id}),r.jsx(E,{children:e.amount}),r.jsx(E,{children:r.jsxs(v,{spacing:4,children:[r.jsx(T,{color:"yellow.500",fontSize:"sm",onClick:()=>{return s=e.id,void t({title:"Receipt Opened",description:`Receipt for ${s} is being viewed`,status:"info",duration:3e3,isClosable:!0});var s},cursor:"pointer",children:"View Receipt"}),r.jsx(T,{color:"teal.500",fontSize:"sm",onClick:()=>{return s=e.id,void t({title:"Payment Confirmed",description:`Payment for ${s} has been confirmed`,status:"success",duration:3e3,isClosable:!0});var s},cursor:"pointer",children:"Confirm Payment"})]})})]},s))):r.jsx(A,{children:r.jsx(E,{colSpan:6,textAlign:"center",py:4,children:"No subscribers found"})})})]})}),K.length>0&&r.jsxs(b,{justify:"space-between",align:"center",mt:4,p:2,children:[r.jsx(b,{align:"center",children:r.jsx(p,{fontSize:"sm",color:"gray.700",mr:2,children:"Rows per page: 10"})}),r.jsxs(v,{spacing:1,children:[r.jsx(g,{variant:"ghost",size:"sm",isDisabled:1===L,children:"‹"}),r.jsx(g,{size:"sm",colorScheme:"teal",variant:"solid",borderRadius:"md",children:"1"}),r.jsx(g,{variant:"ghost",size:"sm",children:"2"}),r.jsx(g,{variant:"ghost",size:"sm",children:"›"})]})]})]})};export{L as default};
