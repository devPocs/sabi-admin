import{G as e,j as s,B as r,J as a,K as o,e as l,F as n,L as i,V as d,a as t,T as h,r as c,u as x,N as m,l as u,S as p,C as g,n as j,D as b,H as f,M as v,o as w,p as N,s as A,w as S}from"./index-WiYeBUZH.js";const y=({vendor:h,onClose:c})=>{const x=e("gray.900","white"),m=e("white","gray.800"),u=e("#FAD3D3","#FAD3D3");return h?s.jsxs(r,{width:"100%",bg:m,borderRadius:"8px",p:"24px",position:"relative",children:[s.jsx(r,{position:"absolute",top:"12px",right:"12px",zIndex:"1",children:s.jsx(a,{size:"32px",bg:"rgba(230, 255, 250, 0.8)",cursor:"pointer",onClick:c,children:s.jsx(o,{size:"sm"})})}),s.jsx(l,{size:"lg",fontWeight:"700",color:x,mb:"24px",children:"Vendor Details"}),s.jsx(n,{justifyContent:"center",alignItems:"center",mb:"24px",children:s.jsx(i,{size:"lg",name:h.name||h.businessName,src:h.profileImage,borderRadius:"full"})}),s.jsxs(d,{align:"stretch",spacing:"20px",children:[s.jsx(C,{label:"Business Name",value:h.businessName||"Grace & Glory"}),s.jsx(C,{label:"Phone Number",value:h.phoneNumber||"09060355350"}),s.jsx(C,{label:"Email Address",value:h.email||"Musilu@gmail.com"}),s.jsx(C,{label:"LGA",value:h.lga||"Ikorodu North"}),s.jsx(C,{label:"Address",value:h.address||"Road 7a, Dr shaffideen amuwo street, Ajah, Lagos"}),s.jsx(C,{label:"Date Added",value:h.dateAdded||"Oct 29, 2024; 10:00 am"})]}),s.jsx(t,{w:"100%",mt:"32px",bg:u,color:"#E53E3E",fontWeight:"600",_hover:{bg:"#F8BEBE"},height:"48px",borderRadius:"8px",children:"Block"}),s.jsx(t,{w:"100%",mt:"32px",bg:"green.500",color:"white",fontWeight:"600",_hover:{bg:"#F8BEBE"},height:"48px",borderRadius:"8px",children:"Approve Vendor"})]}):null},C=({label:e,value:a})=>s.jsxs(r,{children:[s.jsx(h,{fontSize:"14px",fontWeight:"600",color:"black",mb:"4px",children:e}),s.jsx(h,{fontSize:"15px",fontWeight:"400",color:"gray.700",children:a})]}),z=()=>{var e,a;c.useState(10),c.useState(1);const o=x(),{isOpen:l,onOpen:i,onClose:d}=m(),[C,z]=c.useState(null),{data:L,isLoading:D,isError:E,error:I}=u({queryKey:["vendors"],queryFn:S.getVendorAndProducts,onError:e=>{var s;o({title:"Error",description:(null==(s=null==e?void 0:e.data)?void 0:s.message)||"Failed to fetch vendors",status:"error",duration:5e3,isClosable:!0})}}),G=(null==(a=null==(e=null==L?void 0:L.data)?void 0:e.pageItems)?void 0:a.map(((e,s)=>({"S/N":s+1,Vendor:e.name||e.vendorName||"N/A",LGA:e.lga||"N/A","Phone Number":e.phoneNumber||"N/A",id:e.id||s,email:e.email||"N/A",address:e.address||"N/A",dateAdded:e.dateAdded||(new Date).toISOString(),profileImage:e.profileImage||""}))))||[],R=e=>{try{const s=new Date(e);return`${s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}; ${s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).toLowerCase()}`}catch(s){return e}};return s.jsxs(r,{w:["100%","100%"],children:[s.jsx(r,{display:"flex",mt:5,mb:6,justifyContent:"space-between",children:s.jsx(h,{fontWeight:"bold",fontSize:"lg",color:"black",children:"Vendors List"})}),s.jsx(n,{mt:"6",mb:"6",children:s.jsx(r,{w:"100%",h:"40px",maxW:"320px",children:s.jsx(p,{placeHolder:"Search for a vendor",showSelect:!0,selectMenu:[{name:"All LGAs",value:"all lgas"}]})})}),s.jsxs(r,{mt:["10px","24px"],children:[D?s.jsx(g,{py:10,children:s.jsx(j,{})}):E?s.jsx(g,{py:10,children:s.jsx(h,{color:"red.500",children:"Error loading vendors. Please try again."})}):0===G.length?s.jsx(g,{py:10,children:s.jsx(h,{children:"No vendors found."})}):s.jsx(b,{onRowClick:e=>{console.log(e);const s={id:e.row.id,businessName:e.row.Vendor,phoneNumber:e.row["Phone Number"],lga:e.row.LGA,email:e.row.email,address:e.row.address,dateAdded:R(e.row.dateAdded),profileImage:e.row.profileImage};z(s),i()},columns:[{field:"S/N",headerName:"S/N",width:70,disableColumnMenu:!0,flex:1},{field:"Vendor",headerName:"Vendor",width:200,disableColumnMenu:!0,flex:1},{field:"LGA",headerName:"LGA",width:150,disableColumnMenu:!0,flex:1},{field:"Phone Number",headerName:"Phone Number",width:150,disableColumnMenu:!0,flex:1}],rows:G}),!D&&!E&&G.length>0&&s.jsxs(n,{justify:"space-between",align:"center",mt:4,p:2,children:[s.jsx(n,{align:"center",children:s.jsx(h,{fontSize:"sm",color:"gray.600",mr:2,children:"Rows per page: 10"})}),s.jsxs(f,{spacing:1,children:[s.jsx(t,{variant:"ghost",size:"sm",isDisabled:!0,children:"‹"}),s.jsx(t,{size:"sm",colorScheme:"teal",variant:"solid",borderRadius:"md",children:"1"}),s.jsx(t,{variant:"ghost",size:"sm",children:"2"}),s.jsx(t,{variant:"ghost",size:"sm",children:"›"})]})]})]}),s.jsxs(v,{isOpen:l,onClose:d,isCentered:!0,size:"md",children:[s.jsx(w,{backdropFilter:"blur(5px)"}),s.jsx(N,{borderRadius:"12px",maxW:"450px",children:s.jsx(A,{p:0,children:s.jsx(y,{vendor:C,onClose:d})})})]})]})};export{z as default};
