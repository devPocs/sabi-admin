import{G as e,j as n,B as t,J as i,K as o,e as s,F as a,L as r,V as l,a as d,T as c,r as p,u as m,N as h,l as u,O as x,P as g,S as j,C as S,n as C,D as w,H as b,M as I,o as D,p as v,s as f,w as y}from"./index-WiYeBUZH.js";const N=({complaint:c,onClose:p})=>{const m=e("gray.900","white"),h=e("white","gray.800"),u=e("#E6FFF9","#E6FFF9");return c?n.jsxs(t,{width:"100%",bg:h,borderRadius:"8px",p:"24px",position:"relative",children:[n.jsx(t,{position:"absolute",top:"12px",right:"12px",zIndex:"1",children:n.jsx(i,{size:"32px",bg:"rgba(230, 255, 250, 0.8)",cursor:"pointer",onClick:p,children:n.jsx(o,{size:"sm"})})}),n.jsx(s,{size:"lg",fontWeight:"700",color:m,mb:"24px",children:"Complaint Details"}),n.jsx(a,{justifyContent:"center",alignItems:"center",mb:"24px",children:n.jsx(r,{size:"lg",bg:"orange.100",icon:n.jsx(t,{as:"span",fontSize:"2xl",color:"orange.500",children:"⚠️"})})}),n.jsxs(l,{align:"stretch",spacing:"20px",children:[n.jsx(V,{label:"Complaint ID",value:c.complaintId||"#12345"}),n.jsx(V,{label:"Vendor ID",value:c.vendorId||"VEND1234"}),n.jsx(V,{label:"Date Sent",value:c.dateSent||"Oct 29, 2024; 10:00 am"}),n.jsx(V,{label:"Sender",value:c.sender||"Idowu Jide"}),n.jsx(V,{label:"Complaint",value:c.description||"Vendor 123 shouted at me all just because I requested for a nylon bag to pack all the items I got from her store at the waived market jingles on the 5th of May."}),n.jsx(V,{label:"Status",value:c.status||"Pending"})]}),n.jsx(d,{w:"100%",mt:"32px",bg:u,color:"teal.500",fontWeight:"600",_hover:{bg:"teal.50"},height:"48px",borderRadius:"8px",children:"Mark as Resolved"})]}):null},V=({label:e,value:i})=>n.jsxs(t,{children:[n.jsx(c,{fontSize:"14px",fontWeight:"600",color:"black",mb:"4px",children:e}),n.jsx(c,{fontSize:"15px",fontWeight:"400",color:"gray.700",children:i})]}),z=()=>{var e,i;p.useState(10),p.useState(1);const o=m(),{isOpen:s,onOpen:r,onClose:l}=h(),[V,z]=p.useState(null),{data:E,isLoading:M,isError:F,error:P}=u({queryKey:["customerComplaints"],queryFn:y.getCustomerComplaints,onError:e=>{var n;o({title:"Error",description:(null==(n=null==e?void 0:e.data)?void 0:n.message)||"Failed to fetch complaints",status:"error",duration:5e3,isClosable:!0})}}),R=(null==(i=null==(e=null==E?void 0:E.data)?void 0:e.pageItems)?void 0:i.map(((e,n)=>({"S/N":n+1,"Complaint ID":e.id||`#${Math.floor(1e4*Math.random())}`,Sender:e.sender||e.customerName||"N/A","Complaint Description":e.description||"N/A",id:e.id||n,vendorId:e.vendorId||"VEND"+Math.floor(1e4*Math.random()),dateSent:e.dateSent||(new Date).toISOString(),status:e.status||"Pending"}))))||[{"S/N":1,"Complaint ID":"#1234",Sender:"Idowu Jide","Complaint Description":"Vendor 123 didn't include nylon to what...",id:1,vendorId:"VEND1234",dateSent:"2024-10-29T10:00:00",status:"Pending"},{"S/N":2,"Complaint ID":"#1235",Sender:"Idowu Jide","Complaint Description":"Vendor 123 didn't include nylon to what...",id:2,vendorId:"VEND1235",dateSent:"2024-10-28T11:30:00",status:"Pending"},{"S/N":3,"Complaint ID":"#1236",Sender:"Idowu Jide","Complaint Description":"Vendor 123 didn't include nylon to what...",id:3,vendorId:"VEND1236",dateSent:"2024-10-27T09:15:00",status:"Pending"},{"S/N":4,"Complaint ID":"#1237",Sender:"Idowu Jide","Complaint Description":"Vendor 123 didn't include nylon to what...",id:4,vendorId:"VEND1237",dateSent:"2024-10-26T14:20:00",status:"Pending"},{"S/N":5,"Complaint ID":"#1238",Sender:"Idowu Jide","Complaint Description":"Vendor 123 didn't include nylon to what...",id:5,vendorId:"VEND1238",dateSent:"2024-10-25T16:45:00",status:"Pending"}],k=e=>{try{const n=new Date(e);return`${n.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}; ${n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).toLowerCase()}`}catch(n){return e}};return n.jsxs(t,{w:["100%","100%"],children:[n.jsxs(t,{display:"flex",mt:"",justifyContent:"space-between",children:[n.jsx(c,{fontWeight:"bold",pe:"2",color:"black",children:"Complaints List"}),n.jsx(x,{to:"/all-complaints",children:n.jsx(c,{fontWeight:"bold",pe:"2",color:g.colors.green[500],children:"View All"})})]}),n.jsx(a,{mt:"6",mb:"6",children:n.jsx(t,{w:"100%",h:"40px",maxW:"320px",children:n.jsx(j,{placeHolder:"Search for a complaint",showSelect:!0,selectMenu:[{name:"Recent",value:"recent"}],defaultOption:"Recent"})})}),n.jsxs(t,{mt:["10px","24px"],children:[M?n.jsx(S,{py:10,children:n.jsx(C,{})}):F?n.jsx(S,{py:10,children:n.jsx(c,{color:"red.500",children:"Error loading complaints. Please try again."})}):n.jsx(w,{onRowClick:e=>{console.log(e);const n={id:e.row.id,complaintId:e.row["Complaint ID"],sender:e.row.Sender,description:e.row["Complaint Description"],vendorId:e.row.vendorId,dateSent:k(e.row.dateSent),status:e.row.status};z(n),r()},columns:[{field:"S/N",headerName:"S/N",width:70,disableColumnMenu:!0,flex:1},{field:"Complaint ID",headerName:"Complaint ID",width:150,disableColumnMenu:!0,flex:1},{field:"Sender",headerName:"Sender",width:200,disableColumnMenu:!0,flex:1},{field:"Complaint Description",headerName:"Complaint Description",width:300,disableColumnMenu:!0,flex:1}],rows:R}),!M&&!F&&R.length>0&&n.jsxs(a,{justify:"space-between",align:"center",mt:4,p:2,children:[n.jsx(a,{align:"center",children:n.jsx(c,{fontSize:"sm",color:"gray.600",mr:2,children:"Rows per page: 10"})}),n.jsxs(b,{spacing:1,children:[n.jsx(d,{variant:"ghost",size:"sm",isDisabled:!0,children:"‹"}),n.jsx(d,{size:"sm",colorScheme:"teal",variant:"solid",borderRadius:"md",children:"1"}),n.jsx(d,{variant:"ghost",size:"sm",children:"2"}),n.jsx(d,{variant:"ghost",size:"sm",children:"›"})]})]})]}),n.jsxs(I,{isOpen:s,onClose:l,isCentered:!0,size:"md",children:[n.jsx(D,{backdropFilter:"blur(5px)"}),n.jsx(v,{borderRadius:"12px",maxW:"450px",children:n.jsx(f,{p:0,children:n.jsx(N,{complaint:V,onClose:l})})})]})]})};export{z as default};
