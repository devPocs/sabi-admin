import{W as e,X as s,Y as r,j as i,Z as n,_ as a,$ as o,a0 as t,a1 as l,a2 as c,i as d,l as m,r as x,m as h,C as u,a3 as b,B as f,F as j,a as p,a4 as g,T as y,a5 as S,a6 as w,H as v,a7 as z,a8 as C,a9 as k,aa as _,V as N,ab as T,w as R}from"./index-Cq1t7jrM.js";const P=e((function(e,o){const t=s("Link",e),{className:l,isExternal:c,...d}=r(e);return i.jsx(n.a,{target:c?"_blank":void 0,rel:c?"noopener":void 0,ref:o,className:a("chakra-link",l),...d,__css:t})}));P.displayName="Link";const[W,D]=o({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),E=e(((e,s)=>{const o=t("Table",e),{className:l,layout:c,...d}=r(e);return i.jsx(W,{value:o,children:i.jsx(n.table,{ref:s,__css:{tableLayout:c,...o.table},className:a("chakra-table",l),...d})})}));E.displayName="Table";const I=e(((e,s)=>{const{overflow:r,overflowX:o,className:t,...l}=e;return i.jsx(n.div,{ref:s,className:a("chakra-table__container",t),...l,__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:r??o??"auto",overflowY:"hidden",maxWidth:"100%"}})})),q=e(((e,s)=>{const r=D();return i.jsx(n.tbody,{...e,ref:s,__css:r.tbody})})),A=e((({isNumeric:e,...s},r)=>{const a=D();return i.jsx(n.td,{...s,ref:r,__css:a.td,"data-is-numeric":e})})),L=e((({isNumeric:e,...s},r)=>{const a=D();return i.jsx(n.th,{...s,ref:r,__css:a.th,"data-is-numeric":e})})),V=e(((e,s)=>{const r=D();return i.jsx(n.thead,{...e,ref:s,__css:r.thead})})),F=e(((e,s)=>{const r=D();return i.jsx(n.tr,{...e,ref:s,__css:r.tr})})),M=()=>{var e,s,r,n;const{id:a}=l(),o=c(),t=d(),W=m({base:!0,md:!1}),D=m({base:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"}),M=m({base:"xs",md:"sm"}),X=m({base:"sm",md:"md"}),[B,H]=x.useState("pending"),[J]=x.useState(1),[$,O]=x.useState(""),{data:Y,isLoading:K,isError:U}=h({queryKey:["subscription",a],queryFn:()=>R.getSubscriptionPlanById(a),onError:e=>{var s;t({title:"Error",description:(null==(s=null==e?void 0:e.data)?void 0:s.message)||"Failed to fetch subscription details",status:"error",duration:5e3,isClosable:!0})},enabled:!!a}),Z={id:a,amount:(null==(s=null==(e=null==Y?void 0:Y.data)?void 0:e.amount)?void 0:s.toLocaleString())||"0",frequency:(null==(r=null==Y?void 0:Y.data)?void 0:r.frequency)||"N/A",subscribers:(null==(n=null==Y?void 0:Y.data)?void 0:n.subscribersCount)||0},G=[{id:"VEND123",name:"John Doe",dateTime:"4/01/2025 ; 8:00 PM",amount:"5,000"},{id:"CUST123",name:"Jane Smith",dateTime:"4/01/2025 ; 8:00 PM",amount:"5,000"},{id:"VEND123",name:"Robert Johnson",dateTime:"4/01/2025 ; 8:00 PM",amount:"5,000"}],Q=e=>{H(e)},ee=()=>{o(T.subscription)},se=e=>{t({title:"Payment Confirmed",description:`Payment for ${e} has been confirmed`,status:"success",duration:3e3,isClosable:!0})},re=e=>{t({title:"Receipt Opened",description:`Receipt for ${e} is being viewed`,status:"info",duration:3e3,isClosable:!0})};return K?i.jsx(u,{minH:"200px",children:i.jsx(b,{size:"xl",color:"teal.500"})}):U?i.jsxs(f,{w:"100%",children:[i.jsxs(j,{justifyContent:"flex-start",alignItems:"center",mb:6,flexWrap:"wrap",gap:2,children:[i.jsx(p,{leftIcon:i.jsx(g,{}),variant:"ghost",onClick:ee,color:"black",size:W?"sm":"md"}),i.jsx(y,{fontWeight:"bold",fontSize:X,color:"black",children:"Back to Subscription Plans"})]}),i.jsxs(u,{minH:"200px",flexDirection:"column",children:[i.jsx(y,{color:"red.500",mb:4,children:"Error loading subscription details"}),i.jsx(p,{colorScheme:"teal",onClick:()=>window.location.reload(),children:"Try Again"})]})]}):i.jsxs(f,{w:"100%",children:[i.jsxs(j,{justifyContent:"flex-start",alignItems:"center",mb:[4,5,6],flexWrap:"wrap",gap:2,children:[i.jsx(p,{leftIcon:i.jsx(g,{}),variant:"ghost",onClick:ee,color:"black",size:W?"sm":"md"}),i.jsx(y,{fontWeight:"bold",fontSize:X,color:"black",children:"Subscription Plan / Subscribers"})]}),i.jsxs(S,{templateColumns:D,gap:[3,4],bg:"white",p:[4,5,6],borderRadius:"md",mb:[4,5,6],boxShadow:"sm",children:[i.jsxs(w,{children:[i.jsx(y,{fontSize:"sm",color:"gray.700",mb:1,children:"Amount"}),i.jsxs(y,{fontSize:["sm","md"],fontWeight:"medium",children:["₦",Z.amount]})]}),i.jsxs(w,{children:[i.jsx(y,{fontSize:"sm",color:"gray.700",mb:1,children:"Frequency"}),i.jsx(y,{fontSize:["sm","md"],fontWeight:"medium",children:Z.frequency})]}),i.jsxs(w,{colSpan:{base:W?2:1,sm:W?2:1,md:1},children:[i.jsx(y,{fontSize:"sm",color:"gray.700",mb:1,children:"No of Subscribers"}),i.jsx(y,{fontSize:["sm","md"],fontWeight:"medium",children:Z.subscribers})]})]}),i.jsxs(j,{mb:[4,5,6],justifyContent:["flex-start","space-between"],alignItems:["flex-start","center"],flexDirection:["column","row"],gap:[3,0],width:"100%",children:[i.jsxs(v,{spacing:0,mb:[3,0],children:[i.jsx(f,{as:"button",fontSize:M,py:2,px:3,bg:"pending"===B?"teal.200":"white",color:"pending"===B?"teal.700":"gray.700",borderRadius:"md 0 0 md",onClick:()=>Q("pending"),children:"Pending (250)"}),i.jsx(f,{as:"button",fontSize:M,py:2,px:3,bg:"confirmed"===B?"teal.200":"white",color:"confirmed"===B?"teal.700":"gray.700",borderRadius:"0 md md 0",onClick:()=>Q("confirmed"),children:"Confirmed (250)"})]}),i.jsxs(z,{maxW:["100%","100%","320px"],width:"100%",children:[i.jsx(C,{pointerEvents:"none",children:i.jsx(k,{color:"gray.400"})}),i.jsx(_,{color:"gray.700",placeholder:"Search for a subscriber by name or ID",bg:"white",borderRadius:"md",size:W?"sm":"md",value:$,onChange:e=>{O(e.target.value)}})]})]}),i.jsx(f,{bg:"white",borderRadius:"md",boxShadow:"sm",overflow:"hidden",mb:4,children:i.jsx(I,{overflowX:"auto",children:i.jsxs(E,{variant:"simple",size:W?"sm":"md",children:[i.jsx(V,{bg:"gray.50",children:i.jsxs(F,{children:[i.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"S/N"}),i.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"Date & Time"}),i.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"Name"}),i.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"ID"}),i.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"Amount (₦)"}),i.jsx(L,{color:"gray.700",fontSize:["xs","sm"],children:"Actions"})]})}),i.jsx(q,{fontSize:["xs","sm"],children:G.length>0?G.map(((e,s)=>i.jsxs(F,{children:[i.jsx(A,{children:s+1}),i.jsx(A,{children:e.dateTime}),i.jsx(A,{children:e.name}),i.jsx(A,{children:e.id}),i.jsx(A,{children:e.amount}),i.jsx(A,{children:W?i.jsxs(N,{align:"flex-start",spacing:1,children:[i.jsx(P,{color:"yellow.500",fontSize:"xs",onClick:()=>re(e.id),cursor:"pointer",children:"View Receipt"}),i.jsx(P,{color:"teal.500",fontSize:"xs",onClick:()=>se(e.id),cursor:"pointer",children:"Confirm Payment"})]}):i.jsxs(v,{spacing:4,children:[i.jsx(P,{color:"yellow.500",fontSize:"sm",onClick:()=>re(e.id),cursor:"pointer",children:"View Receipt"}),i.jsx(P,{color:"teal.500",fontSize:"sm",onClick:()=>se(e.id),cursor:"pointer",children:"Confirm Payment"})]})})]},s))):i.jsx(F,{children:i.jsx(A,{colSpan:6,textAlign:"center",py:4,children:"No subscribers found"})})})]})})}),G.length>0&&i.jsxs(j,{justify:{base:"center",sm:"space-between"},align:"center",mt:4,p:2,flexDirection:{base:"column",sm:"row"},gap:{base:3,sm:0},children:[i.jsx(j,{align:"center",children:i.jsx(y,{fontSize:"sm",color:"gray.700",mr:2,children:"Rows per page: 10"})}),i.jsxs(v,{spacing:1,children:[i.jsx(p,{variant:"ghost",size:"sm",isDisabled:1===J,children:"‹"}),i.jsx(p,{size:"sm",colorScheme:"teal",variant:"solid",borderRadius:"md",children:"1"}),i.jsx(p,{variant:"ghost",size:"sm",children:"2"}),i.jsx(p,{variant:"ghost",size:"sm",children:"›"})]})]})]})};export{M as default};
