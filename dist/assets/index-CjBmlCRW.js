import{r as e,K as s,j as r,B as n,L as o,N as l,d as a,F as d,O as i,V as t,a as c,T as h,y as x,i as u,l as m,P as p,m as g,S as b,C as j,o as f,D as v,H as A,M as N,p as w,q as C,t as S,w as y}from"./index-Cq1t7jrM.js";const k=({vendor:h,onClose:u})=>{const[m,p]=e.useState("Unblocked"),g=s("gray.900","white"),b=s("white","gray.800");if(s("#FAD3D3","#FAD3D3"),console.log("vendor id",null==h?void 0:h.id),!h)return null;return r.jsxs(n,{width:"100%",bg:b,borderRadius:"8px",p:"24px",position:"relative",children:[r.jsx(n,{position:"absolute",top:"12px",right:"12px",zIndex:"1",children:r.jsx(o,{size:"32px",bg:"rgba(230, 255, 250, 0.8)",cursor:"pointer",onClick:u,children:r.jsx(l,{size:"sm"})})}),r.jsx(a,{size:"lg",fontWeight:"700",color:g,mb:"24px",children:"Vendor Details"}),r.jsx(d,{justifyContent:"center",alignItems:"center",mb:"24px",children:r.jsx(i,{size:"lg",name:h.name||h.businessName,src:h.profileImage,borderRadius:"full"})}),r.jsxs(t,{align:"stretch",spacing:"20px",children:[r.jsx(F,{label:"Business Name",value:h.businessName||"N/A"}),r.jsx(F,{label:"Phone Number",value:h.phoneNumber||"N/A"}),r.jsx(F,{label:"Email Address",value:h.email||"N/A"}),r.jsx(F,{label:"LGA",value:h.lga||"N/A"}),r.jsx(F,{label:"Address",value:h.address||"N/A"}),r.jsx(F,{label:"Date Added",value:h.dateAdded||"N/A"})]}),r.jsx(c,{w:"100%",mt:"32px",bg:"Unblocked"===m?"#FFF5F5":"#E8FFF5",color:"Unblocked"===m?"#E53E3E":"#38A169",fontWeight:"600",_hover:{bg:"Unblocked"===m?"#F8BEBE":"#D6F5E6"},height:"48px",borderRadius:"8px",onClick:()=>{const e="Unblocked"===m?"Blocked":"Unblocked";p(e),x.success(`User has been ${e.toLowerCase()} successfully`,{autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0})},children:"Unblocked"===m?"Block":"Unblock"}),r.jsx(c,{w:"100%",mt:"32px",bg:"green.500",color:"white",fontWeight:"600",_hover:{bg:"#F8BEBE"},height:"48px",borderRadius:"8px",children:"Approve Vendor"})]})},F=({label:e,value:s})=>r.jsxs(n,{children:[r.jsx(h,{fontSize:"14px",fontWeight:"600",color:"black",mb:"4px",children:e}),r.jsx(h,{fontSize:"15px",fontWeight:"400",color:"gray.700",children:s})]}),z=()=>{var s,o;e.useState(1);const l=u(),a=m({base:!0,md:!1}),{isOpen:i,onOpen:t,onClose:x}=p(),[F,z]=e.useState(null),{data:E,isLoading:D,isError:L}=g({queryKey:["vendors"],queryFn:y.getVendorAndProducts,onError:e=>{var s;l({title:"Error",description:(null==(s=null==e?void 0:e.data)?void 0:s.message)||"Failed to fetch vendors",status:"error",duration:5e3,isClosable:!0})}}),W=(null==(o=null==(s=null==E?void 0:E.data)?void 0:s.pageItems)?void 0:o.map(((e,s)=>({"S/N":s+1,Vendor:e.name||e.vendorName||"N/A",LGA:e.lga||"N/A","Phone Number":e.phoneNumber||"N/A",id:e.id||s,email:e.email||"N/A",address:e.address||"N/A",dateAdded:e.dateAdded||(new Date).toISOString(),profileImage:e.profileImage||"",userAddress:e.address||"N/A"}))))||[],U=[{field:"S/N",headerName:"S/N",width:70,disableColumnMenu:!0,flex:a?0:.5,minWidth:50},{field:"Vendor",headerName:"Vendor",width:200,disableColumnMenu:!0,flex:a?0:1.5,minWidth:120},{field:"LGA",headerName:"LGA",width:150,disableColumnMenu:!0,flex:a?0:1,minWidth:80},{field:"Phone Number",headerName:"Phone Number",width:150,disableColumnMenu:!0,flex:a?0:1,minWidth:120}],B=e=>{try{const s=new Date(e);return`${s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}; ${s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).toLowerCase()}`}catch(s){return e}};return r.jsxs(n,{w:"100%",children:[r.jsx(n,{display:"flex",mt:[3,4,5],mb:[4,5,6],justifyContent:"space-between",children:r.jsx(h,{fontWeight:"bold",fontSize:["md","lg"],color:"black",children:"Vendors List"})}),r.jsx(d,{mt:[4,5,6],mb:[4,5,6],children:r.jsx(n,{w:"100%",h:"40px",maxW:["100%","100%","320px"],children:r.jsx(b,{placeHolder:"Search for a vendor",showSelect:!0,selectMenu:[{name:"All LGAs",value:"all lgas"}]})})}),r.jsxs(n,{mt:["10px","16px","24px"],overflowX:"auto",children:[D?r.jsx(j,{py:10,children:r.jsx(f,{})}):L?r.jsx(j,{py:10,children:r.jsx(h,{color:"red.500",children:"Error loading vendors. Please try again."})}):0===W.length?r.jsx(j,{py:10,children:r.jsx(h,{children:"No vendors found."})}):r.jsx(v,{onRowClick:e=>{console.log(e);const s={id:e.row.id,businessName:e.row.Vendor,phoneNumber:e.row["Phone Number"],lga:e.row.LGA,email:e.row.email,address:e.row.userAddress,dateAdded:B(e.row.dateAdded),profileImage:e.row.profileImage};z(s),t()},columns:U,rows:W}),!D&&!L&&W.length>0&&r.jsxs(d,{justify:["center","space-between"],align:"center",mt:4,p:2,flexDirection:["column","row"],gap:[3,0],children:[r.jsx(d,{align:"center",children:r.jsx(h,{fontSize:"sm",color:"gray.600",mr:2,children:"Rows per page: 10"})}),r.jsxs(A,{spacing:1,children:[r.jsx(c,{variant:"ghost",size:"sm",isDisabled:!0,children:"‹"}),r.jsx(c,{size:"sm",colorScheme:"teal",variant:"solid",borderRadius:"md",children:"1"}),r.jsx(c,{variant:"ghost",size:"sm",children:"2"}),r.jsx(c,{variant:"ghost",size:"sm",children:"›"})]})]})]}),r.jsxs(N,{isOpen:i,onClose:x,isCentered:!0,size:"md",children:[r.jsx(w,{backdropFilter:"blur(5px)"}),r.jsx(C,{borderRadius:"12px",maxW:["90%","450px"],children:r.jsx(S,{p:0,children:r.jsx(k,{vendor:F,onClose:x})})})]})]})};export{z as default};
