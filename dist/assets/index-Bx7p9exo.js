import{c as e,b as s,u as a,d as r,w as l,j as i,B as n,e as t,f as d,g as o,h as m,I as u,i as h,r as c,k as x,l as p,T as b,a as g,m as j,F as f,S as N,C as v,n as S,D as y,H as C,M as A,o as w,p as M,q as P,s as z,A as E,t as T,v as q,x as F,y as D,z as k,E as R}from"./index-WiYeBUZH.js";const W=e().shape({fullName:s().required("Full name is required"),emailAddress:s().email("Invalid email address").required("Email address is required"),phoneNumber:s().required("Phone number is required").matches(/^[0-9]+$/,"Phone number must contain only digits").min(10,"Phone number must be at least 10 digits")}),I=({onSuccess:e})=>{const s=a(),c=r({mutationFn:e=>l.addTeamMate(e),onSuccess:a=>{s({title:"Team mate added",description:"Team mate has been added successfully",status:"success",duration:5e3,isClosable:!0}),e&&"function"==typeof e&&e()},onError:e=>{var a;s({title:"Error",description:(null==(a=null==e?void 0:e.data)?void 0:a.message)||"Failed to add team mate",status:"error",duration:5e3,isClosable:!0})}});return i.jsxs(n,{width:"100%",children:[i.jsx(t,{fontWeight:"600",fontSize:"24px",color:"gray.700",mb:"24px",textAlign:"center",children:"Add Team Mate"}),i.jsx(d,{initialValues:{fullName:"",emailAddress:"",phoneNumber:""},validationSchema:W,onSubmit:(e,{resetForm:s})=>{const a={...e,phoneNumber:e.phoneNumber.replace(/\D/g,"")};c.mutate(a),s()},children:({errors:e,touched:s,values:a,handleChange:r})=>i.jsx(o,{style:{width:"100%"},children:i.jsxs(m,{children:[i.jsx(n,{mb:"16px",children:i.jsx(u,{showPrefix:!1,onChange:r,name:"fullName",value:a.fullName,placeholder:"Full Name",title:"Full Name",errorMsg:e.fullName,error:null!=e.fullName&&null!=s.fullName,height:"40px",fontSize:"14px"})}),i.jsx(n,{mb:"16px",children:i.jsx(u,{showPrefix:!1,onChange:r,name:"emailAddress",value:a.emailAddress,placeholder:"Email Address",title:"Email Address",errorMsg:e.emailAddress,error:null!=e.emailAddress&&null!=s.emailAddress,height:"40px",fontSize:"14px"})}),i.jsx(n,{mb:"24px",children:i.jsx(u,{showPrefix:!1,onChange:r,name:"phoneNumber",value:a.phoneNumber,placeholder:"Phone Number",title:"Phone Number",errorMsg:e.phoneNumber,error:null!=e.phoneNumber&&null!=s.phoneNumber,height:"40px",fontSize:"14px"})}),i.jsx(n,{children:i.jsx(h,{variant:"brand",isDisabled:c.isPending,label:c.isPending?"Adding...":"Add Team Mate",type:"submit",width:"100%",height:"40px"})})]})})})]})},K=e().shape({fullName:s().required("Full name is required"),emailAddress:s().email("Invalid email address").required("Email address is required"),phoneNumber:s().required("Phone number is required").matches(/^[0-9]+$/,"Phone number must contain only digits").min(10,"Phone number must be at least 10 digits")}),L=({onSuccess:e,onClose:s,teamMateData:c})=>{const x=a(),p=r({mutationFn:e=>l.editTeamMate(e,c.id),onSuccess:a=>{x({title:"Team mate updated",description:"Team mate has been updated successfully",status:"success",duration:5e3,isClosable:!0}),s&&"function"==typeof s&&s(),e&&"function"==typeof e&&e()},onError:e=>{var s;x({title:"Error",description:(null==(s=null==e?void 0:e.data)?void 0:s.message)||"Failed to update team mate",status:"error",duration:5e3,isClosable:!0})}});return i.jsxs(n,{width:"100%",children:[i.jsx(t,{fontWeight:"600",fontSize:"24px",color:"gray.700",mb:"24px",textAlign:"center",children:"Edit Team Mate"}),i.jsx(d,{initialValues:{fullName:(null==c?void 0:c.fullName)||"",emailAddress:(null==c?void 0:c.emailAddress)||"",phoneNumber:(null==c?void 0:c.phoneNumber)||""},enableReinitialize:!0,validationSchema:K,onSubmit:e=>{const s={fullName:e.fullName,emailAddress:e.emailAddress,phoneNumber:e.phoneNumber.replace(/\D/g,"")};p.mutate(s)},children:({errors:e,touched:s,values:a,handleChange:r})=>i.jsx(o,{style:{width:"100%"},children:i.jsxs(m,{children:[i.jsx(n,{mb:"16px",children:i.jsx(u,{showPrefix:!1,onChange:r,name:"fullName",value:a.fullName,placeholder:"Full Name",title:"Full Name",errorMsg:e.fullName,error:null!=e.fullName&&null!=s.fullName,height:"40px",fontSize:"14px"})}),i.jsx(n,{mb:"16px",children:i.jsx(u,{showPrefix:!1,onChange:r,name:"emailAddress",value:a.emailAddress,placeholder:"Email Address",title:"Email Address",errorMsg:e.emailAddress,error:null!=e.emailAddress&&null!=s.emailAddress,height:"40px",fontSize:"14px"})}),i.jsx(n,{mb:"24px",children:i.jsx(u,{showPrefix:!1,onChange:r,name:"phoneNumber",value:a.phoneNumber,placeholder:"Phone Number",title:"Phone Number",errorMsg:e.phoneNumber,error:null!=e.phoneNumber&&null!=s.phoneNumber,height:"40px",fontSize:"14px"})}),i.jsx(n,{children:i.jsx(h,{variant:"brand",isDisabled:p.isPending,label:p.isPending?"Updating...":"Update Team Mate",type:"submit",width:"100%",height:"40px"})})]})})})]})},O=()=>{var e,s;const[t,d]=c.useState(!1),[o,m]=c.useState(!1),[u,h]=c.useState(!1),[W,K]=c.useState(null),[O,Q]=c.useState(null),[B,H]=c.useState(""),[U,V]=c.useState(!1),$=c.useRef(),_=a(),G=x(),{data:J,isPending:X,isError:Y}=p({queryKey:["teamMembers"],queryFn:l.getTeamMates}),Z=(null==(s=null==(e=null==J?void 0:J.data)?void 0:e.pageItems)?void 0:s.map(((e,s)=>({"S/N":s+1,Name:e.fullName,Email:e.emailAddress,id:e.id||s,fullName:e.fullName,emailAddress:e.emailAddress,phoneNumber:e.phoneNumber}))))||[],ee=()=>{if(!U||!B.trim()||!Z.length)return Z;const e=B.toLowerCase();return Z.filter((s=>s.fullName.toLowerCase().includes(e)||s.emailAddress.toLowerCase().includes(e)))},se=r({mutationFn:e=>l.deleteTeamMate(e),onSuccess:()=>{_({title:"Team member deleted",description:"Team member has been deleted successfully",status:"success",duration:5e3,isClosable:!0}),G.invalidateQueries({queryKey:["teamMembers"]})},onError:()=>{_({title:"Error",description:"Failed to delete team member",status:"error",duration:5e3,isClosable:!0})},onSettled:()=>{h(!1),Q(null)}}),ae=[{field:"S/N",headerName:"S/N",width:70,disableColumnMenu:!0,flex:.5},{field:"Name",headerName:"Name",width:200,disableColumnMenu:!0,flex:1},{field:"Email",headerName:"Email",width:250,disableColumnMenu:!0,flex:1.5},{field:"actions",headerName:"Action",width:150,disableColumnMenu:!0,align:"center",renderCell:e=>i.jsxs(C,{spacing:3,justifyContent:"space-around",display:"flex",height:"100%",children:[i.jsx(D,{icon:i.jsx(k,{}),color:"green.500",variant:"ghost",size:"sm","aria-label":"Edit",onClick:s=>{var a;s.stopPropagation(),a=e.row,K(a),m(!0)}}),i.jsx(D,{icon:i.jsx(R,{}),color:"red.500",variant:"ghost",size:"sm","aria-label":"Delete",onClick:s=>{var a;s.stopPropagation(),a=e.row,Q(a),h(!0)}})]})}];return i.jsxs(n,{w:["100%","100%"],children:[i.jsxs(n,{display:"flex",justifyContent:"space-between",children:[i.jsx(b,{fontWeight:"bold",pe:"2",color:"black",children:"Team Members"}),i.jsx(g,{leftIcon:i.jsx(j,{}),borderRadius:"5",colorScheme:"teal",onClick:()=>{d(!0)},children:"Add New"})]}),i.jsx(f,{mt:"6",mb:"6",children:i.jsx(n,{w:"100%",h:"40px",maxW:"320px",children:i.jsx(N,{placeHolder:"Search for a member",showSelect:!1,onSearch:e=>{H(e),V(!0)}})})}),i.jsxs(n,{mt:["10px","24px"],children:[X?i.jsx(v,{py:10,children:i.jsx(S,{})}):Y?i.jsx(v,{py:10,children:i.jsx(b,{color:"red.500",children:"Error loading team members. Please try again."})}):0===ee().length?i.jsx(v,{py:10,children:i.jsx(b,{children:U&&""!==B.trim()?"No team members match your search criteria.":"No team members found. Add new team members using the button above."})}):i.jsx(y,{columns:ae,rows:ee()}),!X&&!Y&&ee().length>0&&i.jsxs(f,{justify:"space-between",align:"center",mt:4,p:2,children:[i.jsx(f,{align:"center",children:i.jsx(b,{fontSize:"sm",color:"gray.600",mr:2,children:"Rows per page: 10"})}),i.jsxs(C,{spacing:1,children:[i.jsx(g,{variant:"ghost",size:"sm",isDisabled:!0,children:"‹"}),i.jsx(g,{size:"sm",colorScheme:"teal",variant:"solid",borderRadius:"md",children:"1"}),i.jsx(g,{variant:"ghost",size:"sm",children:"2"}),i.jsx(g,{variant:"ghost",size:"sm",children:"›"})]})]})]}),i.jsxs(A,{isOpen:t,onClose:()=>d(!1),children:[i.jsx(w,{}),i.jsxs(M,{maxW:"400px",children:[i.jsx(P,{}),i.jsx(z,{padding:"32px",children:i.jsx(I,{onSuccess:()=>{d(!1),G.invalidateQueries({queryKey:["teamMembers"]})}})})]})]}),W&&i.jsxs(A,{isOpen:o,onClose:()=>m(!1),children:[i.jsx(w,{}),i.jsxs(M,{maxW:"400px",children:[i.jsx(P,{}),i.jsx(z,{padding:"32px",children:i.jsx(L,{onSuccess:()=>{m(!1),G.invalidateQueries({queryKey:["teamMembers"]})},teamMateData:W,onClose:()=>m(!1)})})]})]}),i.jsx(E,{isOpen:u,leastDestructiveRef:$,onClose:()=>h(!1),isCentered:!0,children:i.jsx(w,{bg:"blackAlpha.300",backdropFilter:"blur(5px)",children:i.jsxs(T,{borderRadius:"md",boxShadow:"xl",mx:4,children:[i.jsx(q,{fontSize:"lg",fontWeight:"bold",color:"red.500",borderBottom:"1px solid",borderColor:"gray.100",pb:3,children:"Delete Team Member"}),i.jsx(z,{fontSize:"sm",children:"Are you sure you want to delete this team member? This action cannot be undone."}),i.jsxs(F,{borderTop:"1px solid",borderColor:"gray.100",pt:3,children:[i.jsx(g,{ref:$,borderRadius:"md",_hover:{color:"white",bg:"gray.700"},fontSize:"sm",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),i.jsx(g,{colorScheme:"red",onClick:()=>{O&&O.id&&se.mutate(O.id)},ml:3,fontSize:"sm",isLoading:se.isPending,borderRadius:"md",loadingText:"Deleting...",_hover:{bg:"red.600"},children:"Delete"})]})]})})})]})};export{O as default};
